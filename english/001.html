<!DOCTYPE html>
<html lang="en-us">

<body>

<div>
<p id="verbs_div"></p>
</div>

<div>
<form id="form1" onsubmit="submitForm(event)">
(make) <input type="text" id="a" value="make"><br>
(makes)  <input type="text" id="s" value="makes"><br>
(made)  <input type="text" id="p" value="made"><br>
  <button type="submit">Submit</button>
</form>
</div>

<div>
<p id='res'></p>
</div>

<script>

  const verbs = [
  'do does did',
  'say says said',
  'get gets got',
  'make makes made',
  'go goes went',
  'know knows knew',
  'take takes took',
  'see sees saw',
  'come comes came',
  'think thinks thought',
  'look looks looked',
  'want wants wanted',
  'give gives gave',
  'use uses used',
  'find finds found',
  'tell tells told',
  'ask asks asked',
  'work works worked',
  'seem seems seemed',
  'feel feels felt',
  'try tries tried',
  'leave leaves left',
  'call calles called',
  'help helps helped',
  ];
  
  let textToSpeak;

  function init()
  {
    let tmp = "";
    for (let e of verbs)
    {
      const split = e.split(" ");
      const tmp1 = `<span onclick=onSpan("${split[0]}","${split[1]}","${split[2]}")> ${split[0]} </span> `;
      console.log(tmp1);
      tmp += tmp1;
    }
    const verbs_div = document.getElementById('verbs_div');
    verbs_div.innerHTML = tmp;
  }
  
  function onSpan(a,s,p)
  {
    document.getElementById('a').value = a;
    document.getElementById('s').value = s;
    document.getElementById('p').value = p;
    process();
  }
  
  init();
  process();
  
  function submitForm(event){
        event.preventDefault();
        process();
  }
  
  function process()
  {
        speechSynthesis.cancel();
        const a = document.getElementById('a').value;
        const s = document.getElementById('s').value;
        const p = document.getElementById('p').value;
        const res = document.getElementById('res');
        //console.log(res);
        res.innerHTML = 
  `
  <table border=1>
  <tr>
  <td>
  <br>
  <span onClick="speak('Will I ${a}?');"><b>Will</b> I/you/they/we/he/she <b>${a}</b>?</span>
  <br>
  <br>
  <span onClick="speak('Do I ${a}?');"><b>Do</b> I/you/they/we <b>${a}</b>?</span>
  <br>
  <span onClick="speak('Does he ${a}?');"><b>Does</b> he/she <b>${a}</b>?</span>
  <br>
  <br>
  <span onClick="speak('Did I ${a}?');"><b>Did</b> I/you/they/we/he/she <b>${a}</b>?</span>
  <br>
  <br>
  </td>
  <td>
  <br>
  <span onClick="speak('I will ${a}.');">I/you/they/we/he/she   <b>will ${a}</b>.</span>
  <br>
  <br>
  <span onClick="speak('I ${a}.');">I/you/they/we   <b>${a}</b>.</span>
  <br>
  <span onClick="speak('He ${s}.');">He/she   <b><u>${s}</u></b>.</span>
  <br>
  <br>
  <span onClick="speak('I ${p}.');">I/you/they/we/he/she <b><u>${p}</u></b>.</span>
  <br>
  <br>
  </td>
  <td>
  <br>
  <span onClick="speak('I will not ${a}.');">I/you/they/we/he/she <b>will not ${a}</b>.</span>
  <br>
  <br>
  <span onClick="speak('I do not ${a}.');">I/you/they/we <b>do not ${a}</b>.</span>
  <br>
  <span onClick="speak('He does not ${a}.');">He/she <b>does not ${a}</b>.</span>
  <br>
  <br>
  <span onClick="speak('I did not ${a}.');">I/you/they/we/he/she <b>did not ${a}</b>.</span>
  <br>
  <br>
  </td>
  
  </tr>
  </table>
  
  
  `;

  
  textToSpeak = 
  `
  <table border=1>
  <tr>
  <td>
  <br>
  <b>Will</b> I <b>${a}</b>?<br>
  <br>
  <b>Do</b> I <b>${a}</b>?<br>
  <b>Does</b> he <b>${a}</b>?<br>
  <br>
  <b>Did</b> I <b>${a}</b>?<br>
  <br>
  </td>
  <td>
  <br>
  I <b>will ${a}</b>.<br>
  <br>
  I <b>${a}</b>.<br>
  He <b>${s}</b>.<br>
  <br>
  I <b><u>${p}</u></b>. <br>
  <br>
  </td>
  <td>
  <br>
  I <b>will not ${a}</b>.<br>
  <br>
  I <b>do not ${a}</b>.<br>
  He <b>does not ${a}</b>.<br>
  <br>
  I <b>did not ${a}</b>.<br>
  <br>
  </td>
  
  </tr>
  </table>
  
  
  `;


  }
  </script>

  <select id="voice_select"></select>
  <br>
  <button onclick="speak(textToSpeak);">sprechen</button>
  <button onclick="speechSynthesis.cancel();">halt</button>
  
  <script>

let voices = [];

function list() 
{
  voices = window.speechSynthesis.getVoices();
  if (voices.length > 0)
  {
    console.log(voices);

    const voiceSelect = document.getElementById('voice_select');
    for (let i = 0; i < voices.length ; ++i) 
    {
      const voice = voices[i];
      if (voice.lang.startsWith('en-'))
      {
        var option = document.createElement('option');
        option.textContent = voice.name + ' (' + voice.lang + ')';

        if(voice.default) {
          option.textContent += ' -- DEFAULT';
        }
        option.setAttribute('data-name', voice.name);
        voiceSelect.appendChild(option);
    }
  }

  }
  else
  {
    setTimeout(list, 500);
  }
}

list();

function speak(x)
{
  const utterThis = new SpeechSynthesisUtterance(x);
  const voiceSelect = document.getElementById('voice_select');
  const selectedOption = voiceSelect.selectedOptions[0] || voiceSelect.options[0];

  if (selectedOption)
  {
    for (let i=0; i<voices.length; ++i)
    {
      if (voices[i].name === selectedOption.getAttribute('data-name'))
      {
        utterThis.voice = voices[i];
        break;
      }
    }
  }
  speechSynthesis.speak(utterThis);
}
  
</script>

</body>
</html>
